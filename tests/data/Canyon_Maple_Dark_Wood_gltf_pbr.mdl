mdl 1.6;

using mx = materialx;
import ::df::*;
import ::base::*;
import ::math::*;
import ::state::*;
import ::anno::*;
import ::tex::*;
import ::mx::swizzle::*;
using ::mx::core import *;
using ::mx::stdlib import *;
using ::mx::pbrlib import *;
using ::mx::sampling import *;

color NG_srgb_texture_to_lin_rec709_color3
(
    color in1 = color(0.000000, 0.000000, 0.000000)
)
{
    color bias_out = in1 + 0.055000;
    color linSeg_out = in1 / 12.920000;
    float isAboveR_out = mx::stdlib::mx_ifgreater_float(float3(in1).x, 0.040450, 1.000000, 0.000000);
    float isAboveG_out = mx::stdlib::mx_ifgreater_float(float3(in1).y, 0.040450, 1.000000, 0.000000);
    float isAboveB_out = mx::stdlib::mx_ifgreater_float(float3(in1).z, 0.040450, 1.000000, 0.000000);
    color max_out = math::max(bias_out, 0.000000);
    color isAbove_out = color(isAboveR_out, isAboveG_out, isAboveB_out);
    color scale_out = max_out / 1.055000;
    color powSeg_out = math::pow(scale_out, 2.400000);
    color mix_out = math::lerp(linSeg_out, powSeg_out, isAbove_out);
    return mix_out;
}

float NG_extract_vector3
(
    float3 in1 = float3(0.000000, 0.000000, 0.000000),
    uniform int index = 0
)
{
    float N_x_vector3_out = in1.x;
    float N_y_vector3_out = in1.y;
    float N_z_vector3_out = in1.z;
    float N_sw_vector3_out = mx::stdlib::mx_switch_floatI(N_x_vector3_out, N_y_vector3_out, N_z_vector3_out, 0.000000, 0.000000, index);
    return N_sw_vector3_out;
}

struct NG_standard_surface_to_gltf_pbr__result
{
    color mxp_base_color_out;
    float mxp_metallic_out;
    float mxp_roughness_out;
    float mxp_transmission_out;
    float mxp_thickness_out;
    color mxp_attenuation_color_out;
    color mxp_sheen_color_out;
    float mxp_sheen_roughness_out;
    float mxp_clearcoat_out;
    float mxp_clearcoat_roughness_out;
    color mxp_emissive_out;
};

NG_standard_surface_to_gltf_pbr__result NG_standard_surface_to_gltf_pbr
(
    float base = 1.000000,
    color base_color = color(0.800000, 0.800000, 0.800000),
    float metalness = 0.000000,
    float specular_roughness = 0.200000,
    float transmission = 0.000000,
    color transmission_color = color(1.000000, 1.000000, 1.000000),
    float transmission_depth = 0.000000,
    float sheen = 0.000000,
    color sheen_color = color(1.000000, 1.000000, 1.000000),
    float sheen_roughness = 0.300000,
    float coat = 0.000000,
    color coat_color = color(0.000000, 0.000000, 0.000000),
    float coat_roughness = 0.100000,
    float emission = 0.000000,
    color emission_color = color(1.000000, 1.000000, 1.000000)
)
{
    float has_coat_color_out = math::dot(float3(float3(coat_color).x, float3(coat_color).y, float3(coat_color).z), float3(1.000000, 1.000000, 1.000000));
    color scaledBaseColor_out = base_color * base;
    color coatAttenuation_out = math::lerp(color(1.000000, 1.000000, 1.000000), coat_color, coat);
    float metallic_out1 = metalness;
    float roughness_out1 = specular_roughness;
    float transmission_out1 = transmission;
    float thickness_out1 = transmission_depth;
    color attenuation_color_out1 = transmission_color;
    color sheen_color_out1 = sheen_color * sheen;
    float sheen_roughness_out1 = mx::stdlib::mx_ifgreater_float(sheen, 0.000000, sheen_roughness, 0.000000);
    color coatColor_out = coat_color * coat;
    float constantOneThird_out = 1.000000 / 3.000000;
    float clearcoat_roughness_out1 = coat_roughness;
    color emissive_out1 = emission_color * emission;
    color mixedBaseColor_out = scaledBaseColor_out * coatAttenuation_out;
    float weightedCoat_out = math::dot(float3(float3(coatColor_out).x, float3(coatColor_out).y, float3(coatColor_out).z), float3(constantOneThird_out, constantOneThird_out, constantOneThird_out));
    color base_color_out1 = mx::stdlib::mx_ifequal_color3(has_coat_color_out, 0.000000, scaledBaseColor_out, mixedBaseColor_out);
    float clearcoat_out1 = mx::stdlib::mx_ifequal_float(has_coat_color_out, 0.000000, coat, weightedCoat_out);
    NG_standard_surface_to_gltf_pbr__result result__;
    result__.mxp_base_color_out = base_color_out1;
    result__.mxp_metallic_out = metallic_out1;
    result__.mxp_roughness_out = roughness_out1;
    result__.mxp_transmission_out = transmission_out1;
    result__.mxp_thickness_out = thickness_out1;
    result__.mxp_attenuation_color_out = attenuation_color_out1;
    result__.mxp_sheen_color_out = sheen_color_out1;
    result__.mxp_sheen_roughness_out = sheen_roughness_out1;
    result__.mxp_clearcoat_out = clearcoat_out1;
    result__.mxp_clearcoat_roughness_out = clearcoat_roughness_out1;
    result__.mxp_emissive_out = emissive_out1;
    return result__;
}

float NG_extract_color3
(
    color in1 = color(0.000000, 0.000000, 0.000000),
    uniform int index = 0
)
{
    float N_r_color3_out = float3(in1).x;
    float N_g_color3_out = float3(in1).y;
    float N_b_color3_out = float3(in1).z;
    float N_sw_color3_out = mx::stdlib::mx_switch_floatI(N_r_color3_out, N_g_color3_out, N_b_color3_out, 0.000000, 0.000000, index);
    return N_sw_color3_out;
}

material IMPL_gltf_pbr_surfaceshader
(
    color base_color = color(1.000000, 1.000000, 1.000000),
    float metallic = 1.000000,
    float roughness = 1.000000,
    float3 normal = state::transform_normal(state::coordinate_internal, state::coordinate_world, state::normal()),
    float3 tangent = state::transform_vector(state::coordinate_internal, state::coordinate_world, state::texture_tangent_u(0)),
    float occlusion = 1.000000,
    float transmission = 0.000000,
    float specular = 1.000000,
    color specular_color = color(1.000000, 1.000000, 1.000000),
    uniform float ior = 1.500000,
    float alpha = 1.000000,
    uniform int alpha_mode = 0,
    uniform float alpha_cutoff = 0.500000,
    float iridescence = 0.000000,
    uniform float iridescence_ior = 1.300000,
    float iridescence_thickness = 100.000000,
    color sheen_color = color(0.000000, 0.000000, 0.000000),
    float sheen_roughness = 0.000000,
    float clearcoat = 0.000000,
    float clearcoat_roughness = 0.000000,
    float3 clearcoat_normal = state::transform_normal(state::coordinate_internal, state::coordinate_world, state::normal()),
    color emissive = color(0.000000, 0.000000, 0.000000),
    uniform float emissive_strength = 1.000000,
    float thickness = 0.000000,
    uniform float attenuation_distance = 0.0,
    uniform color attenuation_color = color(1.000000, 1.000000, 1.000000)
)
 = let
{
    float2 clearcoat_roughness_uv_out = mx::pbrlib::mx_roughness_anisotropy(mxp_roughness:clearcoat_roughness, mxp_anisotropy:0.000000);
    float sheen_color_r_out = NG_extract_color3(sheen_color, 0);
    float sheen_color_g_out = NG_extract_color3(sheen_color, 1);
    float sheen_color_b_out = NG_extract_color3(sheen_color, 2);
    float sheen_roughness_sq_out = sheen_roughness * sheen_roughness;
    float one_minus_ior_out = 1.000000 - ior;
    float one_plus_ior_out = 1.000000 + ior;
    color dielectric_f90_out = color(1.000000, 1.000000, 1.000000) * specular;
    float2 roughness_uv_out = mx::pbrlib::mx_roughness_anisotropy(mxp_roughness:roughness, mxp_anisotropy:0.000000);
    color emission_color_out = emissive * emissive_strength;
    float opacity_mask_cutoff_out = mx::stdlib::mx_ifgreatereq_float(alpha, alpha_cutoff, 1.000000, 0.000000);
    float sheen_color_max_rg_out = math::max(sheen_color_r_out, sheen_color_g_out);
    float ior_div_out = one_minus_ior_out / one_plus_ior_out;
    float opacity_mask_out = mx::stdlib::mx_ifequal_floatI(alpha_mode, 1, opacity_mask_cutoff_out, alpha);
    float sheen_intensity_out = math::max(sheen_color_max_rg_out, sheen_color_b_out);
    float dielectric_f0_from_ior_out = ior_div_out * ior_div_out;
    float opacity_out = mx::stdlib::mx_ifequal_floatI(alpha_mode, 0, 1.000000, opacity_mask_out);
    color sheen_color_normalized_out = sheen_color / sheen_intensity_out;
    color dielectric_f0_from_ior_specular_color_out = specular_color * dielectric_f0_from_ior_out;
    color clamped_dielectric_f0_from_ior_specular_color_out = math::min(dielectric_f0_from_ior_specular_color_out, 1.000000);
    color dielectric_f0_out = clamped_dielectric_f0_from_ior_specular_color_out * specular;
    material iridescent_metal_bsdf_out = mx::pbrlib::mx_generalized_schlick_bsdf(mxp_weight:1.000000, mxp_color0:base_color, mxp_color90:color(1.000000, 1.000000, 1.000000), mxp_exponent:5.000000,mxp_roughness:roughness_uv_out, mxp_normal:normal, mxp_tangent:tangent, mxp_distribution:mx_distribution_type_ggx, mxp_scatter_mode:mx_scatter_mode_R, mxp_base:material(), mxp_thinfilm_thickness:iridescence_thickness, mxp_thinfilm_ior:iridescence_ior);
    material metal_bsdf_out = mx::pbrlib::mx_generalized_schlick_bsdf(mxp_weight:1.000000, mxp_color0:base_color, mxp_color90:color(1.000000, 1.000000, 1.000000), mxp_exponent:5.000000,mxp_roughness:roughness_uv_out, mxp_normal:normal, mxp_tangent:tangent, mxp_distribution:mx_distribution_type_ggx, mxp_scatter_mode:mx_scatter_mode_R, mxp_base:material(), mxp_thinfilm_thickness:0.0, mxp_thinfilm_ior:0.0);
    material mix_iridescent_metal_bsdf_out = mx::pbrlib::mx_mix_bsdf(mxp_fg:iridescent_metal_bsdf_out, mxp_bg:metal_bsdf_out, mxp_mix:iridescence);
    material tf_transmission_bsdf_out = mx::pbrlib::mx_dielectric_bsdf(mxp_weight:1.000000, mxp_tint:base_color, mxp_ior:ior, mxp_roughness:roughness_uv_out, mxp_normal:normal, mxp_tangent:tangent, mxp_distribution:mx_distribution_type_ggx, mxp_scatter_mode:mx_scatter_mode_T, mxp_base:material(), mxp_thinfilm_thickness:iridescence_thickness, mxp_thinfilm_ior:iridescence_ior);
    material diffuse_bsdf_out = mx::pbrlib::mx_oren_nayar_diffuse_bsdf(mxp_weight:1.000000, mxp_color:base_color, mxp_roughness:0.000000, mxp_normal:normal);
    material tf_transmission_mix_out = mx::pbrlib::mx_mix_bsdf(mxp_fg:tf_transmission_bsdf_out, mxp_bg:diffuse_bsdf_out, mxp_mix:transmission);
    material iridescent_dielectric_bsdf_out = mx::pbrlib::mx_generalized_schlick_bsdf(mxp_weight:1.000000, mxp_color0:dielectric_f0_out, mxp_color90:dielectric_f90_out, mxp_exponent:5.000000,mxp_roughness:roughness_uv_out, mxp_normal:normal, mxp_tangent:tangent, mxp_distribution:mx_distribution_type_ggx, mxp_scatter_mode:mx_scatter_mode_R, mxp_base:tf_transmission_mix_out, mxp_thinfilm_thickness:iridescence_thickness, mxp_thinfilm_ior:iridescence_ior);
    material transmission_bsdf_out = mx::pbrlib::mx_dielectric_bsdf(mxp_weight:1.000000, mxp_tint:base_color, mxp_ior:ior, mxp_roughness:roughness_uv_out, mxp_normal:normal, mxp_tangent:tangent, mxp_distribution:mx_distribution_type_ggx, mxp_scatter_mode:mx_scatter_mode_T, mxp_base:material(), mxp_thinfilm_thickness:0.0, mxp_thinfilm_ior:0.0);
    material transmission_mix_out = mx::pbrlib::mx_mix_bsdf(mxp_fg:transmission_bsdf_out, mxp_bg:diffuse_bsdf_out, mxp_mix:transmission);
    material dielectric_bsdf_out = mx::pbrlib::mx_generalized_schlick_bsdf(mxp_weight:1.000000, mxp_color0:dielectric_f0_out, mxp_color90:dielectric_f90_out, mxp_exponent:5.000000,mxp_roughness:roughness_uv_out, mxp_normal:normal, mxp_tangent:tangent, mxp_distribution:mx_distribution_type_ggx, mxp_scatter_mode:mx_scatter_mode_R, mxp_base:transmission_mix_out, mxp_thinfilm_thickness:0.0, mxp_thinfilm_ior:0.0);
    material mix_iridescent_dielectric_bsdf_out = mx::pbrlib::mx_mix_bsdf(mxp_fg:iridescent_dielectric_bsdf_out, mxp_bg:dielectric_bsdf_out, mxp_mix:iridescence);
    material base_mix_out = mx::pbrlib::mx_mix_bsdf(mxp_fg:mix_iridescent_metal_bsdf_out, mxp_bg:mix_iridescent_dielectric_bsdf_out, mxp_mix:metallic);
    material sheen_layer_out = mx::pbrlib::mx_sheen_bsdf(mxp_weight:sheen_intensity_out, mxp_color:sheen_color_normalized_out, mxp_roughness:sheen_roughness_sq_out, mxp_normal:normal, mxp_base:base_mix_out);
    material clearcoat_layer_out = mx::pbrlib::mx_dielectric_bsdf(mxp_weight:clearcoat, mxp_tint:color(1.000000, 1.000000, 1.000000), mxp_ior:1.500000, mxp_roughness:clearcoat_roughness_uv_out, mxp_normal:clearcoat_normal, mxp_tangent:tangent, mxp_distribution:mx_distribution_type_ggx, mxp_scatter_mode:mx_scatter_mode_R, mxp_base:sheen_layer_out, mxp_thinfilm_thickness:0.0, mxp_thinfilm_ior:0.0);
    material emission_out = mx::pbrlib::mx_uniform_edf(mxp_color:emission_color_out);
    material shader_constructor_out = mx::pbrlib::mx_surface(clearcoat_layer_out, emission_out, opacity_out, ior);
}
in material(shader_constructor_out);

export material Canyon_Maple_Dark_Wood
(
    material displacementshader = material(),
    uniform int node_texcoord_vector2_8_index = 0,
    uniform mx_coordinatespace_type geomprop_Nworld_space = mx_coordinatespace_type_world,
    uniform mx_coordinatespace_type geomprop_Tworld_space = mx_coordinatespace_type_world,
    uniform int geomprop_Tworld_index = 0,
    float node_multiply_9_in2 = 2.000000,
    uniform texture_2d node_image_color3_2_file = texture_2d("/textures/Canyon_Maple_Dark_Wood_baseColor.png", tex::gamma_linear),
    uniform string node_image_color3_2_layer = "",
    color node_image_color3_2_default = color(0.000000, 0.000000, 0.000000),
    uniform mx_addressmode_type node_image_color3_2_uaddressmode = mx_addressmode_type_periodic,
    uniform mx_addressmode_type node_image_color3_2_vaddressmode = mx_addressmode_type_periodic,
    uniform mx_filterlookup_type node_image_color3_2_filtertype = mx_filterlookup_type_linear,
    uniform string node_image_color3_2_framerange = "",
    uniform int node_image_color3_2_frameoffset = 0,
    uniform mx_addressmode_type node_image_color3_2_frameendaction = mx_addressmode_type_constant,
    uniform texture_2d node_image_vector3_12_file = texture_2d("/textures/Canyon_Maple_Dark_Wood_Mask.png", tex::gamma_linear),
    uniform string node_image_vector3_12_layer = "",
    float3 node_image_vector3_12_default = float3(0.000000, 0.000000, 0.000000),
    uniform mx_addressmode_type node_image_vector3_12_uaddressmode = mx_addressmode_type_periodic,
    uniform mx_addressmode_type node_image_vector3_12_vaddressmode = mx_addressmode_type_periodic,
    uniform mx_filterlookup_type node_image_vector3_12_filtertype = mx_filterlookup_type_linear,
    uniform string node_image_vector3_12_framerange = "",
    uniform int node_image_vector3_12_frameoffset = 0,
    uniform mx_addressmode_type node_image_vector3_12_frameendaction = mx_addressmode_type_constant,
    uniform int node_extract_11_index = 0,
    float node_mix_3_fg = 0.915000,
    float node_mix_3_bg = 0.000000,
    float node1_base = 0.800000,
    float node1_metalness = 0.000000,
    float node1_transmission = 0.000000,
    color node1_transmission_color = color(1.000000, 1.000000, 1.000000),
    float node1_transmission_depth = 0.000000,
    float node1_sheen = 0.000000,
    color node1_sheen_color = color(1.000000, 1.000000, 1.000000),
    float node1_sheen_roughness = 0.300000,
    float node1_coat = 0.000000,
    color node1_coat_color = color(1.000000, 1.000000, 1.000000),
    float node1_coat_roughness = 0.100000,
    float node1_emission = 0.000000,
    color node1_emission_color = color(1.000000, 1.000000, 1.000000),
    float SR_Canyon_Maple_Dark_Wood_occlusion = 1.000000,
    float SR_Canyon_Maple_Dark_Wood_specular = 1.000000,
    color SR_Canyon_Maple_Dark_Wood_specular_color = color(1.000000, 1.000000, 1.000000),
    uniform float SR_Canyon_Maple_Dark_Wood_ior = 1.500000,
    float SR_Canyon_Maple_Dark_Wood_alpha = 1.000000,
    uniform int SR_Canyon_Maple_Dark_Wood_alpha_mode = 0,
    uniform float SR_Canyon_Maple_Dark_Wood_alpha_cutoff = 0.500000,
    float SR_Canyon_Maple_Dark_Wood_iridescence = 0.000000,
    uniform float SR_Canyon_Maple_Dark_Wood_iridescence_ior = 1.300000,
    float SR_Canyon_Maple_Dark_Wood_iridescence_thickness = 100.000000,
    uniform float SR_Canyon_Maple_Dark_Wood_emissive_strength = 1.000000,
    uniform float SR_Canyon_Maple_Dark_Wood_attenuation_distance = 0.0
)
= let
{
    float2 node_texcoord_vector2_8_out = mx::stdlib::mx_texcoord_vector2(mxp_index:node_texcoord_vector2_8_index);
    float3 geomprop_Nworld_out1 = mx::stdlib::mx_normal_vector3(mxp_space:geomprop_Nworld_space);
    float3 geomprop_Tworld_out1 = mx::stdlib::mx_tangent_vector3(mxp_space:geomprop_Tworld_space, mxp_index:geomprop_Tworld_index);
    float2 node_multiply_9_out = node_texcoord_vector2_8_out * node_multiply_9_in2;
    color node_image_color3_2_out = mx::stdlib::mx_image_color3(node_image_color3_2_file, node_image_color3_2_layer, node_image_color3_2_default, node_multiply_9_out, node_image_color3_2_uaddressmode, node_image_color3_2_vaddressmode, node_image_color3_2_filtertype, node_image_color3_2_framerange, node_image_color3_2_frameoffset, node_image_color3_2_frameendaction);
    float3 node_image_vector3_12_out = mx::stdlib::mx_image_vector3(node_image_vector3_12_file, node_image_vector3_12_layer, node_image_vector3_12_default, node_multiply_9_out, node_image_vector3_12_uaddressmode, node_image_vector3_12_vaddressmode, node_image_vector3_12_filtertype, node_image_vector3_12_framerange, node_image_vector3_12_frameoffset, node_image_vector3_12_frameendaction);
    color node_image_color3_2_out_cm_out = NG_srgb_texture_to_lin_rec709_color3(node_image_color3_2_out);
    float node_extract_11_out = NG_extract_vector3(node_image_vector3_12_out, node_extract_11_index);
    float node_mix_3_out = math::lerp(node_mix_3_bg, node_mix_3_fg, node_extract_11_out);
    NG_standard_surface_to_gltf_pbr__result node1_result = NG_standard_surface_to_gltf_pbr(node1_base, node_image_color3_2_out_cm_out, node1_metalness, node_mix_3_out, node1_transmission, node1_transmission_color, node1_transmission_depth, node1_sheen, node1_sheen_color, node1_sheen_roughness, node1_coat, node1_coat_color, node1_coat_roughness, node1_emission, node1_emission_color);
    material SR_Canyon_Maple_Dark_Wood_out = IMPL_gltf_pbr_surfaceshader(node1_result.mxp_base_color_out, node1_result.mxp_metallic_out, node1_result.mxp_roughness_out, geomprop_Nworld_out1, geomprop_Tworld_out1, SR_Canyon_Maple_Dark_Wood_occlusion, node1_result.mxp_transmission_out, SR_Canyon_Maple_Dark_Wood_specular, SR_Canyon_Maple_Dark_Wood_specular_color, SR_Canyon_Maple_Dark_Wood_ior, SR_Canyon_Maple_Dark_Wood_alpha, SR_Canyon_Maple_Dark_Wood_alpha_mode, SR_Canyon_Maple_Dark_Wood_alpha_cutoff, SR_Canyon_Maple_Dark_Wood_iridescence, SR_Canyon_Maple_Dark_Wood_iridescence_ior, SR_Canyon_Maple_Dark_Wood_iridescence_thickness, node1_result.mxp_sheen_color_out, node1_result.mxp_sheen_roughness_out, node1_result.mxp_clearcoat_out, node1_result.mxp_clearcoat_roughness_out, geomprop_Nworld_out1, node1_result.mxp_emissive_out, SR_Canyon_Maple_Dark_Wood_emissive_strength, node1_result.mxp_thickness_out, SR_Canyon_Maple_Dark_Wood_attenuation_distance, node1_result.mxp_attenuation_color_out);
    material Canyon_Maple_Dark_Wood_out = mx::stdlib::mx_surfacematerial(mxp_surfaceshader: SR_Canyon_Maple_Dark_Wood_out, mxp_displacementshader: displacementshader);
    material finalOutput__ = Canyon_Maple_Dark_Wood_out;
}
in material(finalOutput__);
